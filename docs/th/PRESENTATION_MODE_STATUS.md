# Chahuadev Code Animator — รายงานสถานะโหมดการนำเสนอ

**อัปเดตล่าสุด:** 20 ตุลาคม 2025
**ผู้เขียน:** GitHub Copilot (ผู้ช่วยการเขียนโปรแกรม AI)

---

## 1. ภาพรวมโครงการ
โครงการ "โหมดการนำเสนอ" ได้เปลี่ยน Chahua Code Animator จากเดโมแอนิเมชันโค้ดไปเป็นเอนจินสไลด์ที่ขับเคลื่อนด้วย Markdown ขณะนี้ตัวเรนเดอร์จะรับรายงานสถานะ (`.md`) ย่อเรื่องราวลงในบล็อกที่ใช้งานง่ายสำหรับการนำเสนอ และสร้างแอนิเมชันภายในหน้าต่าง Electron แบบสองโหมด (การพิมพ์เทียบกับการนำเสนอ) จนถึงปัจจุบัน งานที่ดำเนินการครอบคลุมถึงการแยกวิเคราะห์ยูทิลิตี้ การผสานรวมตัวเรนเดอร์ การควบคุม UI และการปรับปรุงภาพแบบวนซ้ำที่ได้รับแรงบันดาลใจจากความคิดเห็นของผู้มีส่วนได้ส่วนเสีย

แอปพลิเคชันเดสก์ท็อปเผยแพร่ผ่าน:
- **npm CLI:** `npm install -g @chahuadev/code-animator` จากนั้น `chahua-code-animator --presentation`
- **ไฟล์ปฏิบัติการโดยตรง:** แพ็กเกจตัวติดตั้ง Windows (`.exe` - NSIS) พร้อมการสร้างโฟลเดอร์ `workspace/` อัตโนมัติเมื่อรันครั้งแรก
- **การพัฒนา:** `npm install` + `npm start` สำหรับการพัฒนาและการทดสอบที่ใช้งานอยู่

---

## 2. แผนการดำเนินการแบบทีละขั้นตอน
แต่ละขั้นตอนด้านล่างใช้ช่องทำเครื่องหมายเพื่อระบุความคืบหน้า (`[x]` เสร็จสมบูรณ์, `[ ]` รอดำเนินการ)

### ขั้นตอนที่ 1: ไพพ์ไลน์การนำเข้า Markdown (เสร็จสมบูรณ์)
- [x] สร้าง `renderer/scripts/presentation-utils.js` เพื่อแยก Markdown ออกเป็นข้อมูลส่วน/สไลด์ที่ปรับมาตรฐานแล้ว
- [x] รองรับหัวเรื่อง หัวเรื่องย่อย ย่อหน้า เครื่องหมายคำพูด รายการที่มีหมายเลข และรายการตรวจสอบ โดยรักษาข้อมูลเมตาของข้อความดิบ
- [x] ติดตามข้อมูลเมตาทั่วโลก (ชื่อเรื่อง หัวเรื่องย่อย ผู้แต่ง อัปเดตล่าสุด) สำหรับส่วนหัวสไลด์และสรุปความคืบหน้า

### ขั้นตอนที่ 2: สถาปัตยกรรมการเรนเดอร์งานนำเสนอ (เสร็จสมบูรณ์)
- [x] แนะนำคลาส `PresentationAnimation` ใน `renderer/scripts/animation.js` พร้อมวงจรชีวิตการเริ่ม/หยุด การเล่นอัตโนมัติ และการนำทางด้วยแป้นพิมพ์
- [x] สร้างโครงสร้าง DOM ของสไลด์ (ชื่อเรื่อง กำหนดการ ความคืบหน้า เนื้อหา) โดยใช้โมเดลแบบแยกวิเคราะห์
- [x] ใช้ตัวช่วยการเรนเดอร์ที่นำมาใช้ซ้ำได้สำหรับรายการแบบบล็อก ย่อหน้า และเครื่องหมายคำพูด โดยหลีกเลี่ยงความเสี่ยงจากการแทรก InnerHTML

### เฟส 3: การผสานรวม UI และโฟลว์เดสก์ท็อป (เสร็จสมบูรณ์)
- [x] ขยาย `renderer/scripts/main.js` เพื่อแสดงตัวเลือกโหมดการนำเสนอ การ์ดแสดงตัวอย่าง และปุ่มสลับการตั้งค่า
- [x] อัปเดต `renderer/index.html` และ `renderer/animation.html` เพื่อโฮสต์คอนเทนเนอร์ใหม่ โอเวอร์เลย์ และมาร์กอัปการนำทาง
- [x] เชื่อมต่อ IPC/bridge เพื่อส่งข้อความ `main.js` ส่งข้อมูล Markdown ไปยังหน้าต่างแอนิเมชัน

## เฟส 4: การปรับปรุงภาพและการเข้าถึง (กำลังดำเนินการ)
> **อัปเดต (19 ตุลาคม 2568):**
> - เพิ่มธีม CSS ที่ขยายได้ (`renderer/styles/animation.css`, `renderer/styles/main.css`) ซึ่งประกอบด้วยเค้าโครงการ์ด การจัดรูปแบบตารางงาน และ HUD การนำทาง
> - ปรับแต่งระยะห่างและกฎการล้นเพื่อให้สไลด์อยู่ภายในขอบเขตของช่องมองภาพ แถบนำทางไม่บดบังเนื้อหาอีกต่อไป
> ​​- เพิ่มฟังก์ชันการผ่านตัวชี้บนแคปซูลการนำทางและท่าทางคลิกเพื่อเลื่อนไปข้างหน้านอกตัวสไลด์
> - บีบอัดข้อความหัวข้อย่อยยาวโดยอัตโนมัติในขณะที่ยังคงรักษาคำแนะนำเครื่องมือโฮเวอร์แบบเต็มไว้สำหรับผู้ตรวจสอบ

> **แพตช์ (20 ตุลาคม 2025):**
> - [x] นำการแก้ไข CSS ขนาดเล็กที่มุ่งเน้นไว้ใน `renderer/styles/animation.css` มาใช้ เพื่อแก้ปัญหาพื้นที่ว่างด้านล่างที่ปรากฏในบางสไลด์ (โดยเฉพาะสไลด์ที่ 2 และ 3) การเปลี่ยนแปลงทำให้ `.presentation-stage .slide-inner` เป็นคอนเทนเนอร์ flex แนวคอลัมน์ และอนุญาตให้ `.slide-blocks` และ `.slide-agenda` ขยาย (flex-grow) เพื่อใช้ความสูงที่มีอยู่ภายในเวทีโดยไม่มีการเพิ่มโอเวอร์เลย์หรือพาเนลเทียม — เป็นการเปลี่ยนแปลงเฉพาะเลย์เอาต์เพื่อให้เนื้อหาขยายเต็มเวที
> - [x] อัปเดต `renderer/scripts/animation.js` เพื่อห่อสไลด์ไว้ในเวทีขนาดคงที่ 1100×620 และปรับขนาดเวทีดังกล่าวตาม viewport ช่วยตรึง HUD การนำทางและพื้นที่คลิกให้อยู่กับเวทีแม้เมื่อปรับขนาดหน้าต่าง
> - [x] แยกแผงการตั้งค่า Typing และ Presentation ออกจากกัน เพิ่มการจำค่ารายโหมด และเสริมตัวเลือกการเล่นอัตโนมัติสำหรับโหมดนำเสนอ (ความเร็ว, ระยะเวลาต่อสไลด์, โหมด loop/bounce/once) เพื่อเตรียมต่อยอดฟีเจอร์ระยะถัดไป พร้อมปรับให้แผงที่ไม่ใช้งานถูกซ่อนอย่างสมบูรณ์เพื่อให้โหมดที่เลือกใช้งานได้พื้นที่ทั้งหมด
> - [x] ปรับการ์ดคำแนะนำ workspace ใหม่ โดยซ่อนรายการเริ่มต้นอย่างรวดเร็วไว้ใต้ปุ่มสลับ และลดขนาดคำแนะนำหลักให้กะทัดรัด ทำให้พื้นที่กล่องลากไฟล์ไม่กินพื้นที่เกินจำเป็น
> - วิธีการยืนยัน: เปิดโหมดการนำเสนอ เลื่อนไปยังสไลด์ที่ได้รับผลกระทบ (สไลด์ 2 และ 3) และยืนยันว่าเนื้อหาในรายการ/บล็อกด้านในเติมพื้นที่เวที หากรายการล้น จะสามารถเลื่อนภายในได้ การแก้ไขนี้เป็นแบบมินิมอลและมีความเสี่ยงต่ำ

#### แผนปฏิบัติการเค้าโครงเวทีแบบคงที่
- [x] กำหนดขนาดเวทีแบบมาตรฐาน (ปัจจุบัน 1100×620 พิกเซลเชิงตรรกะ อัตราส่วนราว 16:9) และแสดงเนื้อหาสไลด์ทั้งหมดภายในเวทีนี้เท่านั้น
- [x] ห่อเวทีไว้ในช่องมองภาพที่ตอบสนองได้ โดยปรับขนาดเวทีด้วย `transform: scale(...)` ตามพื้นที่ว่างของหน้าต่าง ในขณะที่ยังคงรักษาอัตราส่วนภาพไว้
- [x] คง HUD การนำทาง โอเวอร์เลย์ และเป้าหมายการคลิกให้อยู่กับขอบเขตของเวที และลดการพึ่งพาความสูง/ความกว้างของ viewport โดยตรง
- [x] เพิ่มการเว้นระยะและพื้นหลังรอบเวที เพื่อให้พื้นที่หน้าจอส่วนเกินแสดงเป็น letter/pillar boxing แทนที่จะยืดองค์ประกอบ UI
- [ ] ตรวจสอบพฤติกรรมในความละเอียดทั่วไป (1280×720, 1920×1080, 3840×2160) และการปรับขนาดหน้าต่าง เพื่อให้แน่ใจว่าเนื้อหายังคงมองเห็นได้อย่างสมบูรณ์
- [ ] อัปเดตแผนการถดถอยเพื่อรวมภาพสแน็ปช็อตที่ยืนยันว่าขอบเวทียังคงตรงกับกรอบการแสดงผล

#### แผนการแยกแผงการตั้งค่า (การพิมพ์เทียบกับการนำเสนอ)
- [x] ปรับโครงสร้าง `renderer/index.html` และ `renderer/styles/main.css` ให้แผงการตั้งค่าของโหมดพิมพ์และโหมดนำเสนอแสดงแยกกัน (แบบแท็บหรือแบบวางเคียง) แทนการใช้การ์ดร่วม
- [x] ปรับ `renderer/scripts/main.js` ให้เก็บ state ของแต่ละโหมดแยกกัน สลับแผงเมื่อเปลี่ยนสไตล์ และคงนามแฝงของคีย์เดิมชั่วคราวเพื่อความเข้ากันได้ย้อนหลัง
- [x] ผูกการทำงานของคอนโทรลใหม่ให้ส่งค่าเฉพาะไปยังโหมดของตนเอง พร้อมคัดลอกค่าเริ่มต้นเข้าสู่ schema แยกในช่วงย้ายข้อมูล
- [x] ปรับ IPC (`transferAnimationData`) ให้ส่งเฉพาะการตั้งค่าของโหมดที่ใช้งานไปยัง `renderer/scripts/animation.js` และเพิ่มตัวตรวจสอบเพื่อปฏิเสธคีย์ที่ไม่เกี่ยวข้อง
- [x] จัดเก็บการตั้งค่าแต่ละโหมด (เช่น local storage หรือไฟล์ config) และเพิ่มปุ่มรีเซ็ตแยกโหมดเพื่อเคลียร์ค่าที่บันทึกไว้
- [ ] เพิ่มรายการตรวจสอบ smoke test ครอบคลุมทั้งสองโหมดหลังแยกเสร็จ เพื่อยืนยันว่าไม่มีการรั่วของค่าระหว่างโหมด ก่อนเดินหน้าฟีเจอร์ใหม่

#### แผนขยายการตั้งค่าโหมดนำเสนอ
- [x] เพิ่มการควบคุมจังหวะเล่นอัตโนมัติ (ความเร็วรวมและตัวจับเวลาต่อสไลด์) พร้อมตัวเลือกลำดับการเล่น (วนซ้ำ, เด้งกลับ, เล่นครั้งเดียว)
- [ ] เปิดให้ปรับความแรงของการสรุปและสลับระหว่างข้อความย่อ/อ่านข้อความเต็มได้จากแผงโหมดนำเสนอขณะเล่น
- [ ] เพิ่มตัวเลือกธีมของเวที (พื้นหลัง, แบบอักษร) และเตรียมฮุคสำหรับโอเวอร์เลย์โน้ตผู้บรรยายในอนาคต
- [ ] ให้ผู้ใช้เลือกเปิด/ปิดองค์ประกอบ HUD การนำทาง (ป้ายความคืบหน้า, ระดับรายละเอียด tooltip, ความหนาแน่นของ agenda) ได้ตามความต้องการ
- [x] จัดเก็บค่าตั้งของโหมดนำเสนอเพื่อใช้งานต่อในแต่ละเซสชัน และเปิด schema เดียวกันให้ CLI/inspector ใช้งานได้
- [ ] บันทึกสัญญาการตั้งค่าฉบับขยาย (README, README.th, รายงานสถานะ) เมื่อพร้อมให้ใช้งานจริง

> **สถานะการตั้งค่า:** การตั้งค่าแบบแยกทำงานได้ประมาณ **90%** แล้ว — แต่ละโหมดมีแผงของตัวเอง แผงที่ไม่ใช้งานถูกซ่อน และระบบจำค่ารายโหมดพร้อมใช้งาน งานที่เหลือคือการทำ smoke test แบบอัตโนมัติก่อนเพิ่มตัวเลือกใหม่สำหรับโหมดนำเสนอ
> **ผลลัพธ์ที่คาดหวัง:** UX ชัดเจนขึ้น (ไม่มีแถบเลื่อนแบบแชร์ที่ไม่ทำอะไรเลย) ลดข้อผิดพลาดระหว่างโหมดต่างๆ และเพิ่มตัวเลือกสำหรับการนำเสนอเพียงอย่างเดียวได้ง่ายขึ้น
> **ความเสี่ยง:** จำเป็นต้องมีการปรับโครงสร้าง UI + IPC ร่วมกัน ซึ่งอาจเกิดการถดถอยหากการตั้งค่าเดิมขึ้นอยู่กับคีย์ที่ใช้ร่วมกัน บรรเทาปัญหาโดยการทดสอบแบบ Smoke-testing ทั้งสองโหมดและคงนามแฝงของคีย์เดิมไว้ในระหว่างการย้าย

- [ ] ระบุสตริง UI (ภาษาไทย/อังกฤษ) สำหรับการควบคุมการนำเสนอ
- [ ] กู้คืนการจัดตำแหน่งปุ่ม/พื้นที่การกด "เรียกดูไฟล์" เพื่อรับประกันความน่าเชื่อถือของกล่องโต้ตอบไฟล์หลังจากการเปลี่ยนแปลงเค้าโครง
- [ ] คงเส้นทาง Markdown ที่เปิดล่าสุดไว้และจดจำรูปแบบแอนิเมชันที่ต้องการในทุกเซสชัน
- [ ] ตรวจสอบขนาดเพย์โหลด Markdown และแสดงข้อผิดพลาดที่เข้าใจง่ายเมื่อการแยกวิเคราะห์ล้มเหลว

#### สถานะการเสริมความแข็งแกร่งด้านความปลอดภัย (security-core.js)
- **ขอบเขตปัจจุบัน:** สัญญาความปลอดภัยเดสก์ท็อปประมาณ 85% ใช้งานจริง (การข้ามเส้นทาง, ความลึกของลิงก์สัญลักษณ์, การตรวจสอบขนาดไฟล์, ความสมบูรณ์ของ SHA-256, การจำกัดอัตรา) สำหรับทั้งโฟลว์การพิมพ์และการนำเสนอ
- [x] บังคับใช้การตรวจสอบการข้ามเส้นทาง, ความลึกของลิงก์สัญลักษณ์ และการตรวจสอบขนาดไฟล์ก่อนการเล่นการนำเสนอหรือการพิมพ์ (บล็อก Markdown ที่ไม่ถูกต้องทันที)
- [x] รักษาการตรวจสอบความสมบูรณ์ของ SHA-256 และการวัดทางไกลแบบจำกัดอัตราในระหว่างการรับข้อมูล Markdown
- [ ] ขยายบันทึกการตรวจสอบ `security-core` เพื่อบันทึกเหตุการณ์วงจรชีวิตโหมดการนำเสนอ (โหลด, ปฏิเสธ, เริ่ม/หยุดเล่นอัตโนมัติ) เพื่อการตรวจสอบย้อนกลับ
- [ ] แสดงคำตัดสินของ security-core ภายในหน้าต่างการนำเสนอ (โทสต์แบบไม่บล็อก + ลิงก์ "ดูบันทึก" เมื่อไฟล์ถูกปฏิเสธ)
- [ ] เพิ่มการครอบคลุม Jest อัตโนมัติสำหรับการตรวจสอบ Markdown (เส้นทางที่ถูกต้อง/ไม่ถูกต้อง ไฟล์ขนาดใหญ่เกินไป แฮชที่ถูกแก้ไข) และตรวจสอบให้แน่ใจว่าบล็อก CI ล้มเหลว
- [ ] จัดทำเอกสารขั้นตอนความปลอดภัย (README + README.th) พร้อมแผนภาพขั้นตอนการทำงานที่แสดงวิธีที่โหมดการนำเสนอเรียกใช้ security-core
- [ ] ประเมินการทำความสะอาดเพิ่มเติมสำหรับลิงก์/รูปภาพ Markdown แบบอินไลน์ก่อนการเรนเดอร์ ลบ URL ระยะไกลออกจนกว่าการทำความสะอาดจะถึงระดับที่เท่าเทียมกัน
- [ ] กำหนดเกณฑ์การออกจากการเผยแพร่: โหมดการนำเสนอไม่สามารถส่งออกได้จนกว่ารายการข้างต้น 100% จะผ่านการตรวจสอบอัตโนมัติและ QA ด้วยตนเองบน Windows + macOS

#### แผนการบรรจุภัณฑ์และการจัดจำหน่ายบนเดสก์ท็อป (MSI / EXE / npm)
- [x] บำรุงรักษาการกำหนดค่า Electron Builder สำหรับ Windows builds (`npm run build:win`)
- [x] ลบตัวเลือก `msi: true` ที่เลิกใช้แล้ว และตรวจสอบเอาต์พุต `.exe` (NSIS) ควบคู่ไปกับ `.exe` แบบพกพา
- [x] เอกสารขั้นตอนการติดตั้ง (การทดสอบแบบ Smoke Test, การตั้งค่าครั้งแรก) ทั้งในไฟล์ README.md และ README.th.md
- [x] ตั้งชื่ออาร์ทิแฟกต์แบบ build อัตโนมัติ เพื่อรวมเวอร์ชันโหมดการนำเสนอและคอมมิตแฮชเพื่อการตรวจสอบย้อนกลับ
- [x] สร้างโฟลเดอร์ `workspace/` ว่างในแอปแพ็กเกจสำหรับการวัดและส่งข้อมูลผู้ใช้เมื่อเปิดใช้งานครั้งแรก
- [x] เตรียมช่องทางการเผยแพร่ npm: ตัดทอนเพย์โหลดของแพ็กเกจ กำหนดรายการ `bin` สำหรับตัวเรียกใช้งานเดสก์ท็อป และเกตการเผยแพร่หลัง CI
- [x] เผยแพร่ npm เบต้า ตรวจสอบเวิร์กโฟลว์ `npx @chahuadev/code-animator --presentation` และบันทึกคำสั่งติดตั้งในไฟล์ README ทั้งสองไฟล์
- [x] บันทึกเมตริกการติดตั้ง npm (จำนวนการดาวน์โหลด อัตราความล้มเหลว) และบันทึกควบคู่ไปกับการวัดและส่งข้อมูล MSI ในแต่ละเวอร์ชัน
- [x] รวมขั้นตอนสร้างตัวติดตั้ง Windows ไว้ในคำสั่ง `npm run dist:win` เพื่อให้การเก็บ telemetry และแท็ก commit เป็นมาตรฐานเดียวกัน
- [x] กำหนดเกตการเผยแพร่: ไม่มีการเผยแพร่ MSI/EXE/npm จนกว่างานโหมดการนำเสนอ + ความปลอดภัยจะเสร็จสมบูรณ์ 100%

> **อัปเดตแพ็กเกจล่าสุด:** `package.json` จะแทรก `COMMIT_HASH` ในระหว่าง `npm run build:win` ซึ่งเปิดใช้งานชื่ออาร์ทิแฟกต์ที่ติดแท็ก commit ตัวสร้าง NSIS จะส่งเอาต์พุต `.exe` (ตัวติดตั้ง) และเอาต์พุต `.exe` แบบพกพา CLI (`@chahuadev/code-animator`) มาพร้อมกับ npm พร้อมการรองรับ `npx` เมตริกการสร้างจะอยู่ใน `workspace/telemetry/installer-metrics.json` และการวัดระยะไกลที่รันครั้งแรกจะบันทึกช่องเปิดเดสก์ท็อปเทียบกับ npm โดยอัตโนมัติ โฟลเดอร์ `workspace/` ถูกสร้างขึ้นล่วงหน้าในระหว่างการเริ่มต้นแอปพลิเคชัน เพื่อให้มั่นใจว่าการจัดเก็บไฟล์ของผู้ใช้และการรวบรวมการวัดระยะไกลทำงานได้อย่างน่าเชื่อถือ

### เฟส 6: คุณสมบัติการนำเสนอขั้นสูง (ยังไม่ได้เริ่มต้น)
- [ ] แนะนำการเขียนสคริปต์ไทม์ไลน์ (ตัวจับเวลาเลื่อนสไลด์อัตโนมัติ, การซ้อนทับบันทึกของผู้บรรยาย)
- [ ] เพิ่มตัวเลือกการส่งออก (การบันทึก PDF, ชุด HTML แบบคงที่)
- [ ] รองรับบล็อกสื่อแบบฝัง (รูปภาพ, ไฮไลต์โค้ด) เมื่อขั้นตอนสรุปเสร็จสมบูรณ์

---

## 3. การลงทะเบียนโมดูลและสถานะ
ตารางด้านล่างเน้นไฟล์สำคัญที่เปิดใช้งานโหมดการนำเสนอ

### ตรรกะหลักของตัวแสดงผล
- [x] `renderer/scripts/animation.js` — โฮสต์ `PresentationAnimation`; จัดการวงจรชีวิตของสไลด์ การนำทาง คำแนะนำเครื่องมือ และการเล่นอัตโนมัติ
- [x] `renderer/scripts/presentation-utils.js` — แยกวิเคราะห์ Markdown และบีบอัดเนื้อหาเพื่อการใช้งานสไลด์
- [x] `renderer/scripts/main.js` — การตั้งค่าพื้นผิว, การแสดงตัวอย่าง, การเชื่อมต่อ IPC สำหรับโหมดการนำเสนอ

### HTML Shells
- [x] `renderer/index.html` — ประกอบด้วยตัวเลือกสไตล์, การ์ดแสดงตัวอย่าง Markdown และปุ่มสลับโหมด
- [x] `renderer/animation.html` — แคนวาสแอนิเมชันบ้าน โอเวอร์เลย์ข้อมูล และคอนเทนเนอร์การนำเสนอ

### ทรัพยากรการจัดรูปแบบ
- [x] `renderer/styles/main.css` — เพิ่มไทล์ตัวอย่างงานนำเสนอ ปุ่ม และการปรับแต่งเค้าโครง
- [x] `renderer/styles/animation.css` — กำหนดการ์ดสไลด์ ตัวอักษร HUD การนำทาง คำแนะนำเครื่องมือ และพฤติกรรมการเลื่อน

### การวินิจฉัยและเครื่องมือ
- [x] `workspace/inspect-slides.cjs` — ตัวช่วย CLI เพื่อตรวจสอบโมเดลสไลด์ที่สร้างขึ้นสำหรับ QA โดยไม่ต้องเปิดใช้งาน Electron
- [x] `workspace/collect-release-metrics.js` — สคริปต์หลังการสร้างที่บันทึกขนาดของตัวติดตั้ง คอมมิตแฮช และข้อมูลเมตาของแพลตฟอร์มลงใน `workspace/telemetry/installer-metrics.json`

### ยูทิลิตี้การแจกจ่าย
- [x] `cli.js` — รายการ npm CLI ที่เรียกใช้แอป Electron (`chahua-code-animator --presentation`) และแท็ก telemetry เป็น `npm-cli` สำหรับการติดตามการทำงานครั้งแรก

### รอดำเนินการหรือวางแผนไว้
- [ ] `renderer/styles/themes/presentation-light.css` *(วางแผนไว้)* — สกินธีมสีอ่อนเฉพาะ
- [ ] `renderer/scripts/presentation-notes.js` *(วางแผนไว้)* — ตัวช่วยสคริปต์โอเวอร์เลย์บันทึกของผู้บรรยายและไทม์ไลน์

---

## 4. การลงทะเบียน TODO อย่างเป็นทางการ
### การดำเนินการทันที (สัปดาห์ที่ 42, 2025)
- [ ] แก้ไขการถดถอยของเป้าหมายการคลิก "เรียกดูไฟล์" และทดสอบการเรียกใช้กล่องโต้ตอบไฟล์อีกครั้งบน Windows
- [ ] เพิ่มสวิตช์ UI เพื่อเลือกระหว่างข้อความ Markdown แบบเต็มและบทสรุปย่อต่อสไลด์
- [ ] ระบุคำอธิบายแป้นพิมพ์ลัด (ภาพซ้อนทับหรือคำแนะนำเครื่องมือ) สำหรับการควบคุมการนำเสนอ

### การปรับปรุงในระยะใกล้
- [ ] นำเสนอข้อเสนอแนะเกี่ยวกับ Markdown lint เมื่อพบโครงสร้างที่ไม่รองรับ (ตาราง รูปภาพแบบอินไลน์)
- [ ] แคชข้อมูลสไลด์ที่วิเคราะห์แล้วเพื่อเร่งความเร็วในการเรนเดอร์ไฟล์เดียวกันซ้ำๆ
- [ ] อนุญาตให้กำหนดค่าการเน้นสีสำหรับแต่ละส่วนได้ผ่าน front-matter ในซอร์ส Markdown

### กิจกรรมสนับสนุน
- [ ] จัดทำเอกสาร JSON schema สำหรับการผสานรวมกับเครื่องมือสร้างอื่นๆ ในอนาคต
- [ ] เพิ่ม Jest/Playwright สำหรับการสร้างสไลด์และการนำทาง UX
- [ ] บันทึกวิดีโอสาธิต/gif สำหรับคำแนะนำการใช้งาน README เมื่อ UX มีเสถียรภาพ

---

## 5. ปัญหาที่ทราบและอุปสรรค
- **UI-2025-10-19-01 — การจัดวางไฟล์ไม่ถูกต้อง:** พื้นที่การกดปุ่มถูกเลื่อนหลังจากการปรับโครงสร้างเค้าโครงใหม่ ผู้ใช้รายงานว่าการเปิดใช้งานกล่องโต้ตอบไม่สอดคล้องกัน จำเป็นต้องมีการตรวจสอบ DOM + CSS
- **UX-2025-10-19-02 — ข้อจำกัดการย่อข้อความ:** ตัวสรุปอัตโนมัติตัดทอนหัวข้อย่อยทางเทคนิคบางรายการอย่างรุนแรง จำเป็นต้องมีการควบคุมที่ผู้ใช้เห็นสำหรับการสลับข้อความแบบเต็ม
- **A11y-2025-10-19-03 — การค้นหาแป้นพิมพ์:** ไม่มีคำแนะนำบนหน้าจอสำหรับทางลัดการนำทาง ส่งผลกระทบต่อผู้นำเสนอครั้งแรก

---

## 6. ความเสี่ยงและการบรรเทา
- **ความแปรปรวนของมาร์กดาวน์:** โครงสร้างมาร์กดาวน์ที่ไม่คาดคิดอาจแสดงผลได้ไม่ดี บรรเทาด้วยคำเตือนการตรวจสอบความถูกต้องและการสำรองข้อมูลอย่างเหมาะสม
- **Layout Drift:** การปรับแต่ง CSS ในอนาคตอาจทำให้ hit-area เสียหายอีกครั้ง ขอแนะนำการทดสอบการถดถอย (Playwright) และโทเค็นการออกแบบเพื่อรักษามิติให้คงที่
- **ประสิทธิภาพ:** ไฟล์ Markdown ขนาดใหญ่สามารถสร้างสไลด์ได้หลายสิบสไลด์ ตรวจสอบเวลาการเรนเดอร์และนำระบบนำทางเสมือนจริงมาใช้หากจำเป็น

---

## 7. ภาคผนวก — ส่วนประกอบสำคัญ
- `renderer/scripts/animation.js`
- `renderer/scripts/presentation-utils.js`
- `renderer/scripts/main.js`
- `renderer/styles/animation.css`
- `renderer/styles/main.css`
- `renderer/animation.html`
- `renderer/index.html`
- `workspace/inspect-slides.cjs`

> **สถานะล่าสุด:** โหมดการนำเสนอมาพร้อมกับบทสรุปสไลด์แบบย่อ คำแนะนำเครื่องมือสำหรับข้อความเต็ม และ HUD การนำทางที่ปรับปรุงใหม่ ความน่าเชื่อถือของไฟล์เรียกดูและธีมยังคงเป็นงานติดตามผลหลัก

---

# 8. คู่มือผู้ใช้ — ภาษาไทย (TH)

### การติดตั้งและตั้งค่า

**จาก npm (แนะนำสำหรับผู้ใช้ทั่วไป):**
```bash
npm install -g @chahuadev/code-animator
chahua-code-animator --presentation
```

**จากตัวติดตั้ง Windows:**
1. ดาวน์โหลด `.exe` จาก GitHub รุ่นต่างๆ
2. เรียกใช้ตัวติดตั้งและทำตามขั้นตอนในตัวช่วยสร้างการติดตั้งให้เสร็จสมบูรณ์
3. เรียกใช้งานจากเมนู Start หรือทางลัดบนเดสก์ท็อป
4. แอปจะสร้างโฟลเดอร์ `workspace/` โดยอัตโนมัติสำหรับจัดเก็บงานนำเสนอ

**การตั้งค่าการพัฒนา:**
```bash
git clone https://github.com/chahuadev/chahua-code-animator
cd chahua-code-animator
npm install
npm start
```

### การโหลดงานนำเสนอ

1. ในหน้าต่างหลัก คลิก **เรียกดูไฟล์** เพื่อเลือกไฟล์ Markdown
2. เลือก **โหมดการนำเสนอ** (ค่าเริ่มต้น) หรือ **โหมดการพิมพ์**
3. (ไม่บังคับ) ปรับการตั้งค่า:
    - **เล่นซ้ำอัตโนมัติ:** เล่นงานนำเสนอซ้ำเมื่อถึงสไลด์สุดท้าย
    - **ความเร็วในการเล่นอัตโนมัติ:** ควบคุมความเร็วในการย่อข้อความและการเลื่อนสไลด์
    - **ความแรงของการสรุป:** ควบคุมความรุนแรงของการย่อจุดหัวข้อย่อย
4. คลิก **เล่นแอนิเมชัน** เพื่อเปิดหน้าต่างงานนำเสนอ

**เคล็ดลับ:** รายการเริ่มต้นอย่างรวดเร็วของ workspace ถูกซ่อนไว้ใต้ปุ่ม **แสดงวิธีใช้งาน** ใต้กล่องลากไฟล์ หากต้องการดูเส้นทาง `workspace/` สำหรับโหมดพัฒนา/ตัวติดตั้ง/ข้อมูลผู้ใช้ (ทั้งภาษาไทยและอังกฤษ) ให้กดปุ่มเพื่อขยายเมื่อจำเป็น

### การนำทางและการควบคุม

| การดำเนินการ | แป้นพิมพ์ | เมาส์ |
| --- | --- | --- |
| สไลด์ถัดไป | <kbd>Space</kbd> หรือ <kbd></kbd> | คลิกฟองการนำทาง |
| สไลด์ก่อนหน้า | <kbd></kbd> หรือ <kbd>Backspace</kbd> | คลิกลูกศรซ้าย |
| แสดงวิธีใช้ | <kbd>H</kbd> | เลื่อนเมาส์ไปวางเหนือไอคอนข้อมูล |
| รีเซ็ต | <kbd>R</kbd> | — |
| ออก | <kbd>Esc</kbd> | ปุ่มคลิก |

### การปรับแต่ง

**ข้อกำหนดไฟล์ Markdown:**
- รูปแบบมาตรฐาน `.md` พร้อมหัวเรื่อง ย่อหน้า รายการหัวข้อย่อย และช่องทำเครื่องหมาย
- เมตาดาต้า (ไม่บังคับ): `# Title`, บรรทัดผู้เขียน, บรรทัดวันที่ด้านบน
- บล็อกที่รองรับ: `# H1`, `## H2`, `- bullet`, `- [ ] checklist`, `> quote`, `1. รายการลำดับเลข`

**เคล็ดลับ:**
- ใช้สัญลักษณ์หัวข้อย่อยสั้นๆ เพื่อการย่อหน้าที่ดีที่สุด
- ช่องทำเครื่องหมายจะถูกแปลงเป็นตัวบ่งชี้ความคืบหน้าโดยอัตโนมัติ
- เครื่องหมายคำพูดจะปรากฏเป็นไฮไลต์ในสไลด์
- บรรทัดยาวมากจะถูกตัดโดยอัตโนมัติ

### สรุปแป้นพิมพ์ลัด

| โหมด | ทางลัด | ฟังก์ชัน |
| --- | --- | --- |
| ทั้งสอง | <kbd>Esc</kbd> | ปิดการเล่น |
| ทั้งสอง | <kbd>R</kbd> | รีเซ็ต |
| การนำเสนอ | <kbd>Space</kbd> / <kbd></kbd> | สไลด์ถัดไป |
| การนำเสนอ | <kbd></kbd> / <kbd>Backspace</kbd> | สไลด์ก่อนหน้า |
| การนำเสนอ | <kbd>H</kbd> | ซ้อนความช่วยเหลือ |
| การพิมพ์ | <kbd>Space</kbd> | เล่น/หยุดชั่วคราว |
| การพิมพ์ | <kbd></kbd> / <kbd></kbd> | เลื่อนตามบล็อก |

---